<SFR_input>
<!--
Notes on SFR input:
    All shps should be in (same) model coordinate units (e.g. ft.)
    If model domain contains a major divide, need to merge relevant NHD datasets 
        (e.g. 04 and 07) prior to running this script
    Put in paths to input/output files as-is (i.e. no double \), surrounded by single quotes
-->
<GlobalSettings>
    <!-- working_dir:
    full path to working folder where intermediate and output will be generated. -->
    <working_dir>D:\ATLData\Wbasin\SFR_quadtree</working_dir>
    <!-- reach_cutoff: 
    minimum reach length to retain following explosion of NHD segments to river cells -->
    <reach_cutoff>1.0</reach_cutoff>
    <!-- eps:
    elevation difference to assign same value to all cells
    so that check does not get messed up by rounding floats -->
    <eps>1.0e-02</eps>
    <!-- DEM_z_conversion:
    multiplier to convert DEM units to ft. (default is 1.0) -->
    <DEM_z_conversion>1.0</DEM_z_conversion>
    <!-- rfact:
    a factor within which start(x,y) and end(x,y) can be found -->
    <rfact>0.95</rfact>
	<!-- distanceTol (required):
    Distance tolerance for routing between segments. A recommended setting is a few multiples of the cell spacing. If the next
    downstream segment is more than this distance away, the segment is treated as an outlet (outseg = 0).
    This helps prevent unwanted routing for segments that aren't outlets in NHD, but are outlets in the model.
    A few multiples of the grid spacing should work. -->
    <distanceTol>5000</distanceTol>
	<!-- preproc:
    a factor within which start(x,y) and end(x,y) can be found -->
    <preproc>True</preproc>
    <!-- tpl:
    a flag for writing out a PEST tpl file instead of SFR package file -->
    <tpl>False</tpl>
    <!-- elevflag:
    a flag for choosing the streambed elevation source
    options: (NHDPlus, elevation_contours, smoothed_DEM) -->
    <elevflag>smoothed_DEM</elevflag>
    <!-- compare_elevation_methods:
    Include other elevation methods in comparison plots, beside what is selected for elevflag
    (requires both DEMs and Topographic contours for input-->
    <compare_elevation_methods>False</compare_elevation_methods>
    <!-- profile_plot_interval:
    Make a streambed profile plot of every profile_plot_interval segment
    default is 20 (i.e., every 20th COMID or segment will be plotted)-->
    <profile_plot_interval>20</profile_plot_interval>
    <!-- Lowerbot: If True, the SFROperations.assign_layers() method will lower the model bottom where
    SFR cells drop below it (to avoid MODFLOW altitude errors). The new set of bottom elevations are output as
    a multi-layer text array (nrows * ncols * nlayers). A new DIS file must be remade from this array. -->
	<Lowerbot>False</Lowerbot>
</GlobalSettings>
<Model_grid_information>
    <!-- MFgrid: polygon shapefile export of grid from Groundwater Vistas -->
    <MFgrid>D:\ATLData\Wbasin\output_shapefiles\grid02qtg.shp</MFgrid>
    <!-- grid_type:
    'structured' for traditional MODFLOW grid (default) or 'usg' for unstructured grid -->
    <grid_type>usg</grid_type>
    <!-- node_attribute: name of attribute of grid shapefile that contains node numbers -->
    <node_attribute>nodenumber</node_attribute>
    <!-- row_field (optional for usg):
    name of attribute of grid shapefile that contains row numbers -->
    <row_field>row</row_field>
    <!-- column_field (optional for usg):
    name of attribute of grid shapefile that contains column numbers -->
    <column_field>col</column_field>
    <!-- layer_field:
    name of attribute of grid shapefile that contains column numbers -->
    <layer_field>layer</layer_field>
    <!-- top_elevation_field (optional for structured; DIS file can be used instead):
    name of attribute of grid shapefile that contains node top elevations -->
    <top_elevation_field>row</top_elevation_field>
    <!-- bottom_elevation_field (optional for structured):
    name of attribute of grid shapefile that contains node bottom elevations -->
    <bottom_elevation_field>col</bottom_elevation_field>
    <!-- inactive_node_number:
    value for designating inactive cells
    optional; but will speed up reading of cell attribute information from the grid shapefile -->
    <inactive_node_number>-1</inactive_node_number>

</Model_grid_information>
<InputFiles>
    <!-- MFdomain: outline of model grid -->
    <MFdomain>D:\ATLData\Wbasin\shps\active_model_extent.shp</MFdomain>
    <!-- MFdis: discretization file -->
    <MFdis>D:\ATLData\Wbasin\SS16_SS18\ss18.dis</MFdis>
    <!-- DEM: DEM for model area, doesn't need to be clipped
    Note: the raster cannot be contained in a geodatabase-->
    <DEM>D:\ATLData\Wbasin\DEM\wapr_ned_full</DEM>
    <!-- PlusflowVAA: from NHDPlus -->
    <PlusflowVAA>D:\ATLData\Wbasin\shps\merged_PlusFlowlineVAA.dbf</PlusflowVAA>
    <!-- Elevslope: from NHDPlus -->
    <Elevslope>D:\ATLData\Wbasin\shps\merged_elevslope.dbf</Elevslope>
    <!-- Flowlines_unclipped: 
        original flowlines covering model area (not clipped to grid) -->
    <Flowlines_unclipped>D:\ATLData\Wbasin\shps\merged_NHDFlowline_smpl.shp</Flowlines_unclipped>
    <!-- arcpy_path: for calling arcpy scripts externally using os.system
    note: this variable currently isn't used-->
    <arcpy_path>C:\python27\ArcGIS10.1\python</arcpy_path>      
    <!-- FLOW: from NHDPlus -->
    <FLOW>D:\ATLData\Wbasin\shps\merged_PlusFlow.dbf</FLOW>
    <!-- FTab: from NHDPlus -->
    <FTab>D:\ATLData\Wbasin\shps\merged_NHDFcode.dbf</FTab>
    <!-- ELEVcontours: from National Map -->
    <ELEVcontours>None</ELEVcontours>

</InputFiles>

<IntermediateFiles>
    <!-- Flowlines: clipped to active area -->
    <Flowlines>flowlines_clipped.shp</Flowlines>
    <!-- ELEV: clipped to active area -->
    <ELEV>river_w_elevations.shp</ELEV>
    <!-- intersect:  flowlines intersected with the grid-->
    <intersect>river_explode.shp</intersect>
    <!-- intersect_points: end vertices of "intersect" fragments as points-->
    <intersect_points>river_explode_points.shp</intersect_points>
    <!-- rivers_table:  -->
    <rivers_table>river_elevs.dbf</rivers_table>
    <!-- CELLS:  -->
    <CELLS>river_cells.shp</CELLS>
	<!-- CELLS_DISS: -->
	<CELLS_DISS>river_cells_dissolve.shp</CELLS_DISS>
    <!-- NHD:  -->
    <NHD>NHD_intersect_edited.shp</NHD>
	 <!-- RCH: Reach ordering (preliminary) file -->
    <RCH>reach_ordering.txt</RCH>
    <!-- ELEVcontours -->
    <ELEVcontours>nothing.txt</ELEVcontours>
    <!-- Routes:  -->
    <Routes>nothing.txt</Routes>
    <!-- Contours_intersect: -->
    <Contours_intersect>nothing.txt</Contours_intersect>
    <!-- Contours_intersect_distances: -->
    <Contours_intersect_distances>nothing.txt</Contours_intersect_distances>
</IntermediateFiles>

<OutputFiles>
    <OUT>Wbasin.SFR</OUT>
    <GISSHP>Wbasin_SFR.shp</GISSHP>
    <!-- MAT1 and MAT2:
        files for use with Groundwater Vistas -->
    <MAT1>SFR_GWVmat1.txt</MAT1>
    <MAT2>SFR_GWVmat2.txt</MAT2>
    <WIDTH>SFRwidthinfo.txt</WIDTH>
    <MULT>Multiple_segments.txt</MULT>
</OutputFiles>

<SFR_parameters>
<!--
default parameter values output to final SFR2 input file for MODFLOW -
could read some of these in through a shapefile if variation in the domain
is desired
-->
	<nparseg>0</nparseg>
	<nsfrpar>0</nsfrpar>
	<const>128390.4</const>  <!-- 1.486*86400. -->
	<dleak>0.0001</dleak>
	<nstrail>10</nstrail>
	<isuzn>1</isuzn>
	<nsfrsets>30</nsfrsets>
	<istcb1>50</istcb1>
	<!-- istcb2: Controls output of SFR package results to text file. -->
	<istcb2>53</istcb2>
	<isfropt>1</isfropt>
	<bedK>5.0</bedK>
	<bedKmin>1.0e-08</bedKmin>
	<bedthick>1.0</bedthick>
	<icalc>1</icalc>
	<nstrpts>0</nstrpts>
	<iprior>0</iprior>
	<flow>0.</flow>
	<runoff>0.</runoff>
	<etsw>0.</etsw>
	<pptsw>0.</pptsw>
	<roughch>0.037</roughch>
	<roughbk>0.</roughbk>
	<cdepth>0.</cdepth>
	<fdepth>0.</fdepth>
	<awdth>0.</awdth>
	<bwdth>0.</bwdth>
	<thickm1>1.0</thickm1>
	<thickm2>1.0</thickm2>
	<Hc1fact>1.0</Hc1fact>
	<Hc2fact>1.0</Hc2fact>
	<stream_depth>3.0</stream_depth>
    <minimum_slope>1e-4</minimum_slope>
	<!-- minimum_slope: value to be assigned to seemingly zero-sloped reaches -->
	<minimum_slope>1.0e-06</minimum_slope>
	<!-- buff:  Buffer so if STOP - thick - buff < bottom of cell, move to layer below-->
	<buff>1.0</buff>
	<roughness_coeff>0.37</roughness_coeff>
</SFR_parameters>

</SFR_input>
